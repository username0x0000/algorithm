# 기본 자료구조



#### 자료구조

##### 데이터 단위와 데이터 자체 사이의 물리적 또는 논리적인 관계



#### 배열

##### 같은 자료형의 변수로 이루어진 요소가 모여 직선 모양으로 줄지어 있는 자료구조

```c
int a[5];					// 자료형 배열이름[요소 개수];
```

- 배열의 요소값을 초기화 하며 배열 선언 가능

- 배열의 요소 개수 탐색

  > 요소의 자료형이나 크기에 영향을 받지 않고 배열의 요소 개수를 구할 수 있음

  - sizeof(a) : 배열 a의 요소 개수 구하기
  - sizeof(a[0]) : 요소 a[0]의 크기 구하기



#### C언어의 메모리 구조

##### 메모리 영역은 크게 데이터(Data), 스택(Stack), 힙(Heap)영역

- 데이터 영역

  - 전역변수와 정적변수가 할당되는 영역.
  - 프로그램을 시작하면 할당하고, 프로그램을 종료하면 메모리에서 해제.

- 스택 영역

  - 함수 호출 시 생성되는 지역 변수와 매개변수가 저장되는 영역.
  - 함수 호출이 완료되면 사라짐.

- 힙 영역

  - 할당해야 할 메모리 영역의 크기를 프로그램이 실행되는 동안 결정해야 하는 경우에 사용. 

  - 관리가 가능한 데이터 외에 다른 형태의 데이터를 관리하기 위한 빈 공간. 즉, 동적할당을 통해 생성된 동적 변수를 관리하기 위한 영역. 
  - 다른 영역을 모두 할당하고 남은공간 이지만 제한이 있는 것은 아니며, 시스템의 메모리 영역의 여유공간에 따라 달라짐. 

  - 필요에 따라 동적으로 메모리를 할당.



#### 메모리 할당 기간과 동적 객체 생성 (힙 영역)

##### 메모리를 확보하기 위해 제공되는 calloc함수와 malloc함수

| calloc 함수 | 설명                                                         |
| ----------- | ------------------------------------------------------------ |
| 헤더        | #include <stdlib.h>                                          |
| 형식        | void *calloc(size_t nmemb, size_t size);                     |
| 해설        | 크기가 size인 자료가 nmemb개 만큼 들어갈 메모리를 할당. 할당한 메모리 영역은 모든 비트가 0으로 초기화. |
| 변환값      | 메모리 할당에 성공하면 할당한 영역의 첫 번째 포인터를 반환하고, 실패하면 NULL 포인터를 반환. |

| malloc 함수 | 설명                                                         |
| ----------- | ------------------------------------------------------------ |
| 헤더        | #include <stdlib.h>                                          |
| 형식        | void *malloc(size_t size);                                   |
| 해설        | 크기가 size인 메모리를 할당. 할당한 메모리의 값은 정의되지 않음. |
| 변환값      | 메모리 할당에 성공하면 할당한 영역의 첫 번째 포인터를 반환하고, 실패하면 NULL 포인터를 반환. |

calloc, malloc 함수는 힙(heap)이라는 특별한 '빈 공간'의 메모리를 확보해야함. 이떄 확보한 메모리가 불필요하면 그 공간을 해제 해야한다. 이를 위해 제공되는 함수가 free 함수이다.

| free 함수 | 설명                                                         |
| --------- | ------------------------------------------------------------ |
| 헤더      | #include <stdlib.h>                                          |
| 형식      | void  free(void*ptr);                                        |
| 해설      | ptr이 가르키는 메모리를 해제하여 이후에 다시 할당할 수 있도록 해줌. |
| 변환값    | 없음                                                         |

***"Q. calloc과 malloc의 차이점이 결국 무엇인가?"***

= size가 몇개가 할당되는냐, size 그대로의 크기만을 할당하느냐의 차이.



#### 배열의 동적 할당

```c
int a[num];							// 요소가 num개인 배열 a
b = calloc(num, sizeof(int))		// 자료형이 int인 요소가 num개인 배열 b 동적 할당
```



#### 포인터와 배열

##### 포인터는 ''객체 또는 함수를 가르키는 것''으로 정의

```c
int *p;			// *p는 int형 객체를 가르키는 포인터 
double *q;

int n = 37;
p = &n;			// p는 int n의 주소값, *p는 n의 데이터(*p = n)
```

##### 배열은 해당 자료형의 포인터이다.

```c
int a[5];			// 배열 a 의 자료형은 사실 int *인 것이다
*(a + 2) = a[2]
```



#### void 포인터

##### 배열이나 구조체 객체 등 모든 자료형의 메모리 확보 또는 해제에 사용

- 특정한 자료형의 포인터를 주고 받을 때 자료형이 서로 맞지 않으면 문제가 발생하므로 void포인터를 반환하거나 사용. 
- void 포인터는 모든 형태의 객체를 가르킬 수 있으며, void 포인터의 값을 모든 자료형에 대입할 수 있고, 거꾸로 모든 자료형의 포인터 값을 void 포인터에 대입 가능.

```c
char a;
int b;
int *p = &a; 		// 에러
void *vp1 = &a;
void *vp2 = &b;
```





```

```

